<section class="bg-gradient-to-b from-surface to-surface2 rounded p-6">
  <h1 class="text-2xl font-bold mb-1">AsagiScans</h1>
  <p class="text-gray-300">Your source for high-quality manga translations.</p>
  <div class="mt-4 flex flex-wrap gap-2">
    <% allGenres.forEach(genre => { %>
      <a href="/?genre=<%= genre %>" class="px-3 py-1.5 rounded-full bg-surface hover:bg-surface2 text-sm"><%= genre %></a>
    <% }); %>
  </div>
</section>

<% if (typeof recentUpdated !== 'undefined' && recentUpdated && recentUpdated.length) { %>
<h2 class="text-xl font-semibold mt-6 mb-3">Recently Updated</h2>
<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4">
  <% recentUpdated.forEach(manga => { %>
    <div class="group bg-surface rounded shadow hover:shadow-lg transition overflow-hidden border border-white/5">
      <a href="/manga/<%= manga.slug %>" class="block relative w-full pt-[150%] bg-surface2 overflow-hidden">
        <img src="<%= manga.cover %>" alt="<%= manga.title %>" class="absolute inset-0 w-full h-full object-cover disable-save" loading="lazy" decoding="async" draggable="false" oncontextmenu="return false;">
        <div class="absolute top-2 left-2 flex gap-1 z-10">
          <% if (manga.isNew) { %>
            <span class="px-2 py-0.5 text-[10px] font-semibold rounded bg-emerald-600 text-white">NEW</span>
          <% } %>
          <% if (manga.isHot) { %>
            <span class="px-2 py-0.5 text-[10px] font-semibold rounded bg-orange-600 text-white">HOT</span>
          <% } %>
          <% if (manga.rating === '18+') { %>
            <span class="px-2 py-0.5 text-[10px] font-semibold rounded bg-rose-700 text-white">18+</span>
          <% } %>
        </div>
      </a>
      <div class="p-3 space-y-1">
        <h3 class="text-sm font-semibold line-clamp-2 group-hover:text-brand"><a href="/manga/<%= manga.slug %>"><%= manga.title %></a></h3>
        <% if (manga.latest) { %>
          <p class="text-[11px] text-gray-400">Updated: <%= manga.latest.created_at %></p>
        <% } %>
        <% if (manga.latestChapters && manga.latestChapters.length) { %>
          <div class="space-y-0.5">
            <% manga.latestChapters.slice(0,2).forEach(ch => { %>
              <a href="/manga/<%= manga.slug %>/<%= ch.slug %>" class="block text-xs text-gray-300 hover:text-brand truncate">• <%= ch.title %></a>
            <% }) %>
          </div>
        <% } %>
      </div>
    </div>
  <% }) %>
</div>
<% } %>

<h2 class="text-xl font-semibold mt-6 mb-3">Manga Library</h2>
<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4">
  <% mangaLibrary.forEach(manga => { %>
    <div class="group bg-surface rounded shadow hover:shadow-lg transition overflow-hidden border border-white/5">
      <a href="/manga/<%= manga.slug %>" class="block relative w-full pt-[150%] bg-surface2 overflow-hidden">
        <img src="<%= manga.cover %>" alt="<%= manga.title %>" class="absolute inset-0 w-full h-full object-cover">
        <div class="absolute top-2 left-2 flex gap-1 z-10">
          <% if (manga.isNew) { %>
            <span class="px-2 py-0.5 text-[10px] font-semibold rounded bg-emerald-600 text-white">NEW</span>
          <% } %>
          <% if (manga.isHot) { %>
            <span class="px-2 py-0.5 text-[10px] font-semibold rounded bg-orange-600 text-white">HOT</span>
          <% } %>
          <% if (manga.rating === '18+') { %>
            <span class="px-2 py-0.5 text-[10px] font-semibold rounded bg-rose-700 text-white">18+</span>
          <% } %>
        </div>
      </a>
      <div class="p-3 space-y-1">
        <h3 class="text-sm font-semibold line-clamp-2 group-hover:text-brand">
          <a href="/manga/<%= manga.slug %>"><%= manga.title %></a>
        </h3>
        <% if (manga.latestChapters && manga.latestChapters.length) { %>
          <div class="space-y-0.5">
            <% manga.latestChapters.slice(0,2).forEach(ch => { %>
              <a href="/manga/<%= manga.slug %>/<%= ch.slug %>" class="block text-xs text-gray-300 hover:text-brand truncate">• <%= ch.title %></a>
            <% }) %>
          </div>
        <% } %>
      </div>
    </div>
  <% }); %>
</div>

<div class="mt-6 flex items-center justify-center gap-2">
  <% for(let i = 1; i <= totalPages; i++) { %>
    <a class="px-3 py-1.5 rounded <%= i == currentPage ? 'bg-brand text-white' : 'bg-surface hover:bg-surface2' %>" href="/?<%= q ? `q=${q}&` : '' %><%= genre ? `genre=${genre}&` : '' %>page=<%= i %>"><%= i %></a>
  <% } %>
  </div>


